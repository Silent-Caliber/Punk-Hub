-- Gui to Lua
-- Version: 3.2
local __PELINDA_SERVICE__ = "punk-x-release-key" -- Service ID
local __PELINDA_SILENTMODE__ = true
local __PELINDA_SECURITY_LEVEL__ = 1 

-- Hub execution function
local function LoadHub()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/GBMofo/Punk-Hub/main/The-Forge"))()
end

function ShowKeySystem()
    function MakeDraggable(gui)
        local dragging
        local dragInput
        local dragStart
        local startPos
        local function update(input)
            local delta = input.Position - dragStart
            gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
        gui.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                dragging = true
                dragStart = input.Position
                startPos = gui.Position
                input.Changed:Connect(function()
                    if input.UserInputState == Enum.UserInputState.End then
                        dragging = false
                    end
                end)
            end
        end)
        gui.InputChanged:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
                dragInput = input
            end
        end)
        game:GetService("UserInputService").InputChanged:Connect(function(input)
            if input == dragInput and dragging then
                update(input)
            end
        end)
    end

    local ScreenGui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local ImageLabel = Instance.new("ImageLabel")
    local UICorner = Instance.new("UICorner")
    local NamaHub = Instance.new("TextLabel")
    local KeySystem = Instance.new("TextLabel")
    local TextBoxContainer = Instance.new("Frame")
    local UICorner_2 = Instance.new("UICorner")
    local UIStroke = Instance.new("UIStroke")
    local KeyTextBox = Instance.new("TextBox")
    local Kunci = Instance.new("ImageLabel")
    local GetKeyContainer = Instance.new("Frame")
    local UICorner_3 = Instance.new("UICorner")
    local UIStroke_2 = Instance.new("UIStroke")
    local GetKeyButton = Instance.new("TextButton")
    local RedeemContainer = Instance.new("Frame")
    local UICorner_4 = Instance.new("UICorner")
    local UIStroke_3 = Instance.new("UIStroke")
    local RedeemButton = Instance.new("TextButton")

    ScreenGui.Parent = game.CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.IgnoreGuiInset = true

    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.BackgroundColor3 = Color3.fromRGB(46, 46, 46)
    MainFrame.BorderSizePixel = 0
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.Size = UDim2.new(0, 400, 0, 200)
    MakeDraggable(MainFrame)

    ImageLabel.Parent = MainFrame
    ImageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
    ImageLabel.BackgroundTransparency = 1.000
    ImageLabel.BorderSizePixel = 0
    ImageLabel.Position = UDim2.new(0.5, 0, 0.5, 0)
    ImageLabel.Size = UDim2.new(0, 400, 0, 200)
    ImageLabel.Image = "rbxassetid://8992230677"
    ImageLabel.ImageColor3 = Color3.fromRGB(0, 0, 0)
    ImageLabel.ImageTransparency = 0.400
    ImageLabel.ScaleType = Enum.ScaleType.Slice
    ImageLabel.SliceCenter = Rect.new(99, 99, 99, 99)

    UICorner.CornerRadius = UDim.new(0, 12)
    UICorner.Parent = MainFrame

    NamaHub.Name = "NamaHub"
    NamaHub.Parent = MainFrame
    NamaHub.BackgroundTransparency = 1.000
    NamaHub.BorderSizePixel = 0
    NamaHub.Position = UDim2.new(0.0199999996, 0, 0, 5)
    NamaHub.Size = UDim2.new(1.25, -100, 0, 40)
    NamaHub.Font = Enum.Font.RobotoCondensed
    NamaHub.Text = "Welcome to, PUNK X HUB"
    NamaHub.TextColor3 = Color3.fromRGB(255, 255, 255)
    NamaHub.TextSize = 34.000
    NamaHub.TextXAlignment = Enum.TextXAlignment.Left

    KeySystem.Name = "KeySystem"
    KeySystem.Parent = MainFrame
    KeySystem.BackgroundTransparency = 1.000
    KeySystem.BorderSizePixel = 0
    KeySystem.Position = UDim2.new(0, 0, 0.159999996, 0)
    KeySystem.Size = UDim2.new(0, 200, 0, 50)
    KeySystem.Font = Enum.Font.FredokaOne
    KeySystem.Text = "KEY SYSTEM"
    KeySystem.TextColor3 = Color3.fromRGB(43, 177, 255)
    KeySystem.TextSize = 34.000
    KeySystem.TextXAlignment = Enum.TextXAlignment.Center
    KeySystem.AnchorPoint = Vector2.new(0.5, 0)
    KeySystem.Position = UDim2.new(0.5, 0, 0.20, 0)

    TextBoxContainer.Name = "TextBoxContainer"
    TextBoxContainer.Parent = MainFrame
    TextBoxContainer.BackgroundTransparency = 1.000
    TextBoxContainer.BorderSizePixel = 0
    TextBoxContainer.Position = UDim2.new(0.0500000007, 0, 0.449999988, 0)
    TextBoxContainer.Size = UDim2.new(0, 360, 0, 40)

    UICorner_2.CornerRadius = UDim.new(0, 8)
    UICorner_2.Parent = TextBoxContainer

    UIStroke.Parent = TextBoxContainer
    UIStroke.Thickness = 3.000
    UIStroke.Color = Color3.fromRGB(255, 255, 255)
    UIStroke.Transparency = 0.800
    UIStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    KeyTextBox.Name = "KeyTextBox"
    KeyTextBox.Parent = TextBoxContainer
    KeyTextBox.BackgroundColor3 = Color3.fromRGB(63, 63, 65)
    KeyTextBox.BackgroundTransparency = 1.000
    KeyTextBox.BorderSizePixel = 0
    KeyTextBox.Position = UDim2.new(0.10796915, 0, 0, 0)
    KeyTextBox.Size = UDim2.new(0, 315, 0, 40)
    KeyTextBox.ZIndex = 2
    KeyTextBox.Font = Enum.Font.SourceSans
    KeyTextBox.PlaceholderColor3 = Color3.fromRGB(150, 150, 150)
    KeyTextBox.PlaceholderText = "Enter your license key. . ."
    KeyTextBox.Text = ""
    KeyTextBox.TextColor3 = Color3.fromRGB(220, 220, 220)
    KeyTextBox.TextSize = 20.000
    KeyTextBox.TextXAlignment = Enum.TextXAlignment.Left

    Kunci.Name = "Kunci"
    Kunci.Parent = TextBoxContainer
    Kunci.BackgroundTransparency = 1.000
    Kunci.BorderSizePixel = 0
    Kunci.Position = UDim2.new(0.0199999996, 0, 0.200000003, 0)
    Kunci.Size = UDim2.new(0, 25, 0, 25)
    Kunci.ZIndex = 3
    Kunci.Image = "rbxassetid://10723416652"

    GetKeyContainer.Name = "GetKeyContainer"
    GetKeyContainer.Parent = MainFrame
    GetKeyContainer.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
    GetKeyContainer.BorderSizePixel = 0
    GetKeyContainer.Position = UDim2.new(0.0500000007, 0, 0.699999988, 0)
    GetKeyContainer.Size = UDim2.new(0, 175, 0, 40)

    UICorner_3.CornerRadius = UDim.new(0, 8)
    UICorner_3.Parent = GetKeyContainer

    UIStroke_2.Parent = GetKeyContainer
    UIStroke_2.Thickness = 3.000
    UIStroke_2.Color = Color3.fromRGB(255, 255, 255)
    UIStroke_2.Transparency = 0.200
    UIStroke_2.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    GetKeyButton.Name = "GetKeyButton"
    GetKeyButton.Parent = GetKeyContainer
    GetKeyButton.BackgroundTransparency = 1.000
    GetKeyButton.BorderSizePixel = 0
    GetKeyButton.Size = UDim2.new(1, 0, 1, 0)
    GetKeyButton.Font = Enum.Font.SourceSans
    GetKeyButton.Text = "Get Key"
    GetKeyButton.TextColor3 = Color3.fromRGB(42, 172, 248)
    GetKeyButton.TextSize = 20.000

    RedeemContainer.Name = "RedeemContainer"
    RedeemContainer.Parent = MainFrame
    RedeemContainer.BackgroundColor3 = Color3.fromRGB(42, 172, 248)
    RedeemContainer.BorderSizePixel = 0
    RedeemContainer.Position = UDim2.new(0.550000012, 0, 0.699999988, 0)
    RedeemContainer.Size = UDim2.new(0, 175, 0, 40)

    UICorner_4.CornerRadius = UDim.new(0, 8)
    UICorner_4.Parent = RedeemContainer

    UIStroke_3.Parent = RedeemContainer
    UIStroke_3.Thickness = 3.000
    UIStroke_3.Color = Color3.fromRGB(255, 255, 255)
    UIStroke_3.Transparency = 0.200
    UIStroke_3.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

    RedeemButton.Name = "RedeemButton"
    RedeemButton.Parent = RedeemContainer
    RedeemButton.BackgroundTransparency = 1.000
    RedeemButton.BorderSizePixel = 0
    RedeemButton.Size = UDim2.new(1, 0, 1, 0)
    RedeemButton.Font = Enum.Font.SourceSans
    RedeemButton.Text = "Redeem"
    RedeemButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    RedeemButton.TextSize = 20.000

    -- // Button Logic
    GetKeyButton.MouseButton1Click:Connect(function()
        local key_link = Pelinda.GetKeyLink(__PELINDA_SERVICE__)
        setclipboard(key_link)
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "PUNK X HUB",
            Text = "Key link copied to clipboard!",
            Duration = 5
        })
    end)

    RedeemButton.MouseButton1Click:Connect(function()
        local key = KeyTextBox.Text
        local status = Pelinda.Init({
            Service = __PELINDA_SERVICE__,
            SilentMode = __PELINDA_SILENTMODE__,
            Key = key,
            SecurityLevel = __PELINDA_SECURITY_LEVEL__
        })

        if status == "validated!!" then
            writefile("yourkeypath.txt", key)
            ScreenGui:Destroy()
            LoadHub()
        else
            KeyTextBox.Text = ""
            KeyTextBox.PlaceholderText = "Invalid Key!"
            task.wait(2)
            KeyTextBox.PlaceholderText = "Enter your license key. . ."
        end
    end)
end

-- // Auto Check Logic
spawn(function()
    pcall(function()
        local ExistingKey = isfile("yourkeypath.txt")
        if ExistingKey then
            local success, KeyFound = pcall(function()
                return readfile("yourkeypath.txt")
            end)

            if success and KeyFound and KeyFound ~= "" then
                KeyFound = KeyFound:gsub("%s+", "") 
                print("Validating your key...")

                local validated = false
                for attempt = 1, 3 do
                    print("Key Validation Attempt #" .. attempt)
                    local ok, result = pcall(function()
                        return Pelinda.Init({
                            Service = __PELINDA_SERVICE__,
                            SilentMode = __PELINDA_SILENTMODE__,
                            Key = KeyFound,
                            SecurityLevel = __PELINDA_SECURITY_LEVEL__
                        })
                    end)

                    if ok and result == "validated!!" then
                        validated = true
                        break
                    end
                    task.wait(.5)
                end

                if validated then
                    print("Success Load")
                    LoadHub()
                else
                    print("Expired or Invalid Key")
                    ShowKeySystem()
                end
            else
                ShowKeySystem()
            end
        else
            ShowKeySystem()
        end
    end)
end)
